# üéØ –°–∏—Å—Ç–µ–º–∞ –ú–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ - –ü–æ–ª–Ω–æ–µ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìñ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç **—É–º–Ω–µ–µ**:

### –†–∞–Ω—å—à–µ:
```
–ó–∞–ø—Ä–æ—Å ‚Üí –ë–î ‚Üí –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### –°–µ–π—á–∞—Å:
```
–ó–∞–ø—Ä–æ—Å ‚Üí VacancyManager ‚Üí 
  ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
  ‚îú‚îÄ –ï—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ –°–ï–ô–ß–ê–°
  ‚îú‚îÄ –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ –í –§–û–ù–ï
  ‚îî‚îÄ –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```

---

## üöÄ –ì–ª–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **VacancyManager** - –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –µ—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç)
- ‚úÖ –§–æ–Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
- ‚úÖ –£–º–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–∞–π–ª:** `src/shared/managers/vacancyManager.ts`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { vacancyManager } from './src/shared/managers/vacancyManager.js';

// –£–º–Ω—ã–π –ø–æ–∏—Å–∫
const result = await vacancyManager.search({
  keywords: ['nodejs'],
  locations: ['chisinau'],
  salaryMin: 1000,
  schedule: ['remote'],
  limit: 10
});

// result.meta.source:
// 'fresh' - —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–ø–∞—Ä—Å–∏–ª–∏
// 'cache' - –∏–∑ –ë–î (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
// 'partial' - –∏–∑ –ë–î –Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
const stats = await vacancyManager.getStats();
// [{ source: 'rabota.md', count: 1250, status: 'fresh', ... }]
```

---

### 2. **SubscriptionManager** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—á–µ—Ä–µ–∑ Worker)

**–§–∞–π–ª:** `src/shared/managers/subscriptionManager.ts`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { subscriptionManager } from './src/shared/managers/subscriptionManager.js';

// –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
const subscription = await subscriptionManager.create({
  userId: user.id,
  filters: {
    keywords: ['javascript'],
    locations: ['chisinau'],
    salaryMin: 1000
  },
  sources: ['rabota.md', '999.md']
});

// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const subs = await subscriptionManager.getUserSubscriptions(userId);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ { subscription, newVacancies })
const updates = await subscriptionManager.checkForUpdates();

// –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
await subscriptionManager.delete(subscriptionId);
```

---

## üåê –ù–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –í–∞–∫–∞–Ω—Å–∏–∏

**GET /api/vacancies** - –£–º–Ω—ã–π –ø–æ–∏—Å–∫
```bash
# –ï—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞ - –∑–∞–ø—É—Å—Ç–∏—Ç –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤–µ—Ä–Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ - –≤–µ—Ä–Ω–µ—Ç —á—Ç–æ –µ—Å—Ç—å + –∑–∞–ø—É—Å—Ç–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ñ–æ–Ω–µ
curl "http://localhost:3000/api/vacancies?keywords=nodejs&salaryMin=1000"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [ /* –≤–∞–∫–∞–Ω—Å–∏–∏ */ ],
  "meta": {
    "total": 15,
    "source": "fresh",      // fresh | cache | partial
    "lastUpdate": "2024-01-05T12:00:00Z",
    "updating": false       // –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤ —Ñ–æ–Ω–µ
  }
}
```

**GET /api/vacancies/stats** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
curl "http://localhost:3000/api/vacancies/stats"
```

**POST /api/vacancies/force-parse** - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```bash
curl -X POST "http://localhost:3000/api/vacancies/force-parse" \
  -H "Content-Type: application/json" \
  -d '{"sources": ["rabota.md"]}'
```

### –ü–æ–¥–ø–∏—Å–∫–∏

**POST /api/subscriptions** - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```bash
curl -X POST "http://localhost:3000/api/subscriptions" \
  -H "Content-Type: application/json" \
  -d '{
    "telegramId": 123456789,
    "filters": {
      "keywords": ["nodejs"],
      "salaryMin": 1000
    },
    "sources": ["rabota.md"]
  }'
```

**GET /api/subscriptions/:telegramId** - –ü–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl "http://localhost:3000/api/subscriptions/123456789"
```

**PATCH /api/subscriptions/:id** - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
curl -X PATCH "http://localhost:3000/api/subscriptions/clx123..." \
  -H "Content-Type: application/json" \
  -d '{"filters": {"keywords": ["javascript", "typescript"]}}'

# –í—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
curl -X PATCH "http://localhost:3000/api/subscriptions/clx123..." \
  -H "Content-Type: application/json" \
  -d '{"isActive": false}'
```

**DELETE /api/subscriptions/:id** - –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```bash
curl -X DELETE "http://localhost:3000/api/subscriptions/clx123..."
```

**GET /api/subscriptions/stats** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
```bash
curl "http://localhost:3000/api/subscriptions/stats"
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (–ë–î –ø—É—Å—Ç–∞)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí GET /api/vacancies?keywords=nodejs

2. API ‚Üí VacancyManager.search()

3. VacancyManager:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î ‚Üí –ü—É—Å—Ç–æ!
   - üì≠ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
   - –ü–∞—Ä—Å–∏—Ç rabota.md (2-5 —Å–µ–∫—É–Ω–¥)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä—ã
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

4. API ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
   {
     data: [–≤–∞–∫–∞–Ω—Å–∏–∏],
     meta: { source: "fresh" }  ‚Üê —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–ø–∞—Ä—Å–∏–ª–∏
   }
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí GET /api/vacancies?keywords=nodejs

2. VacancyManager:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î ‚Üí –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç ‚Üí < 12 —á–∞—Å–æ–≤
   - ‚úÖ –î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑ –ë–î (–±—ã—Å—Ç—Ä–æ!)

3. API ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
   {
     data: [–≤–∞–∫–∞–Ω—Å–∏–∏],
     meta: { source: "cache", updating: false }
   }
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–∞–Ω–Ω—ã–µ —É—Å—Ç–∞—Ä–µ–ª–∏

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí GET /api/vacancies?keywords=nodejs

2. VacancyManager:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î ‚Üí –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç ‚Üí > 12 —á–∞—Å–æ–≤
   - ‚è∞ –î–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ!
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á—Ç–æ –µ—Å—Ç—å —Å–µ–π—á–∞—Å

3. API ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
   {
     data: [—Å—Ç–∞—Ä—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏],
     meta: { 
       source: "partial",
       updating: true  ‚Üê –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
     }
   }

4. –í —Ñ–æ–Ω–µ: Worker –ø–∞—Ä—Å–∏—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
5. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∏—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:
   POST /api/subscriptions
   {
     "telegramId": 123,
     "filters": { "keywords": ["nodejs"] },
     "sources": ["rabota.md"]
   }

2. –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

3. Worker –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
   - –ò—â–µ—Ç –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
   - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - –û–±–Ω–æ–≤–ª—è–µ—Ç lastNotified

4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   üîî –ù–∞–π–¥–µ–Ω–æ 3 –Ω–æ–≤—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–∏!
   1. Senior Node.js Developer...
   2. ...
```

---

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç
```bash
npm run test:system
```

### –¢–µ—Å—Ç 2: –¢–µ—Å—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
```bash
npm run test:managers
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ VacancyManager (—É–º–Ω—ã–π –ø–æ–∏—Å–∫)
- ‚úÖ SubscriptionManager (–ø–æ–¥–ø–∏—Å–∫–∏)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### 1. –¢–æ–ª—å–∫–æ API (–±–µ–∑ Worker)

```bash
npm run dev:api
```

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ VacancyManager
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∏ –ø—É—Å—Ç–æ–π –ë–î
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ (CRUD)

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå –§–æ–Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 2. API + Worker (–ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
npm run dev:api

# –¢–µ—Ä–º–∏–Ω–∞–ª 2
npm run dev:worker
```

**–†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ!**
- ‚úÖ –£–º–Ω—ã–π –ø–æ–∏—Å–∫
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π + —Ñ–æ–Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–ª—è –±–æ—Ç–∞

```typescript
// –í Telegram –±–æ—Ç–µ
bot.onText(/\/search (.+)/, async (msg, match) => {
  const query = match[1];

  // –ü—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
  const response = await fetch(
    `http://localhost:3000/api/vacancies?keywords=${query}`
  );
  
  const data = await response.json();

  // VacancyManager –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
  // - –ü—Ä–æ–≤–µ—Ä–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
  // - –ó–∞–ø—É—Å—Ç–∏—Ç –ø–∞—Ä—Å–∏–Ω–≥ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  // - –í–µ—Ä–Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

  if (data.meta.source === 'fresh') {
    bot.sendMessage(chatId, 'üÜï –¢–æ–ª—å–∫–æ —á—Ç–æ —Å–ø–∞—Ä—Å–∏–ª —Å–≤–µ–∂–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏!');
  }

  if (data.meta.updating) {
    bot.sendMessage(chatId, '‚è≥ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –±—É–¥–µ—Ç –µ—â–µ –±–æ–ª—å—à–µ –≤–∞–∫–∞–Ω—Å–∏–π!');
  }

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã...
});
```

### –ü–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞

```typescript
bot.onText(/\/subscribe/, async (msg) => {
  // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É
  await fetch('http://localhost:3000/api/subscriptions', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      telegramId: msg.from.id,
      filters: {
        keywords: ['nodejs'],
        salaryMin: 1000
      },
      sources: ['rabota.md']
    })
  });

  bot.sendMessage(msg.chat.id, 
    '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! –ë—É–¥—É —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –Ω–æ–≤—ã—Ö –≤–∞–∫–∞–Ω—Å–∏—è—Ö.'
  );
});
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –í .env:

```env
# –ü–æ—Ä–æ–≥ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 12 —á–∞—Å–æ–≤)
# –ò–∑–º–µ–Ω–∏—Ç—å –º–æ–∂–Ω–æ –≤ vacancyManager.ts:
# private readonly STALE_THRESHOLD = 12 * 60 * 60 * 1000;

# –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã Worker
PARSE_INTERVAL=21600000   # 6 —á–∞—Å–æ–≤
NOTIFY_INTERVAL=7200000   # 2 —á–∞—Å–∞
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è:

–í `src/shared/managers/vacancyManager.ts`:
```typescript
private readonly STALE_THRESHOLD = 6 * 60 * 60 * 1000; // 6 —á–∞—Å–æ–≤ –≤–º–µ—Å—Ç–æ 12
```

---

## üéØ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

- [x] ‚úÖ VacancyManager - —É–º–Ω—ã–π –ø–æ–∏—Å–∫
- [x] ‚úÖ SubscriptionManager - –ø–æ–¥–ø–∏—Å–∫–∏
- [x] ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π
- [x] ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
- [x] ‚úÖ Worker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥
- [x] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- [x] ‚úÖ –¢–µ—Å—Ç—ã

## üîú –û—Å—Ç–∞–ª–æ—Å—å

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º (–æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- [ ] –ü–∞—Ä—Å–µ—Ä—ã –¥–ª—è 999.md –∏ makler.md
- [ ] Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üêõ Troubleshooting

### API —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** VacancyManager –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥

**–ü—Ä–∏—á–∏–Ω–∞:** Worker –Ω–µ –∑–∞–ø—É—â–µ–Ω (–Ω–µ—Ç Redis)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏ Redis: `docker run -d -p 6379:6379 redis:7-alpine`
2. –ó–∞–ø—É—Å—Ç–∏ Worker: `npm run dev:worker`

### –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–µ —É–≤–µ–¥–æ–º–ª—è—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–∑–¥–∞–ª –ø–æ–¥–ø–∏—Å–∫—É, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Worker –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏ Worker
2. –ü–æ–¥–æ–∂–¥–∏ 2 —á–∞—Å–∞ (–∏–ª–∏ –∏–∑–º–µ–Ω–∏ `NOTIFY_INTERVAL`)
3. –î–æ–±–∞–≤—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –±–æ—Ç–æ–º –≤ `src/worker/jobs/notifyJob.ts`

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞! –ú–æ–∂–µ—à—å –ø–æ–¥–∫–ª—é—á–∞—Ç—å –±–æ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å! üöÄ**
